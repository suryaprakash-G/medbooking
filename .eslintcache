[{"/root/webdev/medbooking/medbooking/src/index.js":"1","/root/webdev/medbooking/medbooking/src/pages/appointment.js":"2","/root/webdev/medbooking/medbooking/src/pages/main.js":"3","/root/webdev/medbooking/medbooking/src/pages/patient_form.js":"4","/root/webdev/medbooking/medbooking/src/pages/view_appointment.js":"5","/root/webdev/medbooking/medbooking/src/pages/adminlogin.js":"6","/root/webdev/medbooking/medbooking/src/pages/adminmain.js":"7","/root/webdev/medbooking/medbooking/src/components/history.js":"8","/root/webdev/medbooking/medbooking/src/components/back_btn.js":"9","/root/webdev/medbooking/medbooking/src/components/doc_select.js":"10","/root/webdev/medbooking/medbooking/src/pages/docedit.js":"11"},{"size":1176,"mtime":1611614459541,"results":"12","hashOfConfig":"13"},{"size":16807,"mtime":1615241380097,"results":"14","hashOfConfig":"13"},{"size":8812,"mtime":1615831211613,"results":"15","hashOfConfig":"13"},{"size":7269,"mtime":1615267740187,"results":"16","hashOfConfig":"13"},{"size":3698,"mtime":1615226306950,"results":"17","hashOfConfig":"13"},{"size":3350,"mtime":1615267830468,"results":"18","hashOfConfig":"13"},{"size":14042,"mtime":1615266930318,"results":"19","hashOfConfig":"13"},{"size":86,"mtime":1596016516262,"results":"20","hashOfConfig":"13"},{"size":286,"mtime":1615832802371,"results":"21","hashOfConfig":"13"},{"size":530,"mtime":1607865623632,"results":"22","hashOfConfig":"13"},{"size":5104,"mtime":1615267654018,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1qrbmnf",{"filePath":"27","messages":"28","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"26"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"26"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"26"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"26"},"/root/webdev/medbooking/medbooking/src/index.js",[],["51","52"],"/root/webdev/medbooking/medbooking/src/pages/appointment.js",["53","54"],"import React from 'react';\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\nimport Calendar from 'react-calendar';\nimport styles from '../style/appointment.module.scss';\nimport calen from '../style/react_calendar.module.scss';\nimport bs from '../style/bootstrap.min.module.css';\nimport cx from 'classnames';\nimport Back from '../components/back_btn'\nimport Docsel from '../components/doc_select'\n  const time=[\"09:00 am\",\"10:00 am\",\"11:00 am\",\"12:00 pm\",\"01:00 pm\",\"02:00 pm\",\"03:00 pm\",\"04:00 pm\",\"05:00 pm\",\"06:00 pm\"];//12 hr format for displaying\n  const day=[\"sun\",\"mon\",\"tue\",\"wed\",\"thu\",\"fri\",\"sat\"];\n  var data =  [\n    [\"01-02-2020\",\"02-02-2020\",\"03-02-2020\",\"04-02-2020\",\"05-02-2020\",\"06-02-2020\",\"07-02-2020\"],\n    [\"mon\",\"tue\",\"wed\",\"thu\",\"fri\",\"sat\",\"sun\"],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0]\n  ];\n  var mail=\"\";\n  const timings=[\"9:00\",\"10:00\",\"11:00\",\"12:00\",\"13:00\",\"14:00\",\"15:00\",\"16:00\",\"17:00\",\"18:00\"];//server 24 hr format\n  var doclist=[];//doctor json list with name and id and possible mor in future\n  var date=new Date();//current/selected date throughout this file\n  const today=new Date(date);\n  var maxdate=new Date(date)\n  maxdate.setDate(maxdate.getDate()+180);\n  date.setHours(0,0,0,0);\n  var gdatechk=[0,0,0,0,0,0,0];//get date all 7 date return check list\n  var doc=[\"loading . . .   \",\"\"];\n  class Appointment extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n          loading: true,\n          docselect:0,\n          docname:\" \",//doctor name\n          curdate:today,//system date\n          showModal: false,//datepicker toggle\n          desc_load:true,//description loading flag\n          dclist_load:true,//doc list loading flag\n          calen_load:true//appointment calendar loading flag\n        };\n        this.check_login =this.check_login.bind(this);\n        this.check_login();\n        this.get_doc = this.get_doc.bind(this);\n        this.get_desc = this.get_desc.bind(this);\n        this.get_date = this.get_date.bind(this);\n        this.logout=this.logout.bind(this);\n        this.bookapt=this.bookapt.bind(this)\n        this.onChange = this.onChange.bind(this);\n        this.getdatechk = this.getdatechk.bind(this);\n        axiosRetry(axios, { retries: 3 });\n        this.selectcallback= this.selectcallback.bind(this);\n      }\n      componentDidMount() {\n        this.get_doc();\n    }\n    check_login(){\n        const loggedin = localStorage.getItem(\"user\");\n        if (loggedin!=null) {\n            mail=JSON.parse(loggedin)[\"mail\"];\n            this.setState({user:JSON.parse(loggedin)});\n        }\n        else{\n            alert(\"please login first\");\n            this.props.history.push('/');\n        }\n    }\n    logout(){\n        this.setState({user:{}});\n        localStorage.clear();\n        this.props.history.push('/');\n      }\n    get_desc(e){\n        axios.post(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/getdoc`,{id:e}).then(res => { \n            if(res.data[\"message\"]!==\"Internal server error\"){\n            doc[1]=res.data;\n            this.setState({desc_load:false});\n            }\n    })\n    }\n    //get vertical timimngs per day and put on the matrix in a given column in data matrix\n    get_date(lpdate,i){\n        if(lpdate<today){\n            for(var y=2;y<=11;y++)//10 time values\n                {data[y][i]=5;}\n            gdatechk[i]=1;\n            this.getdatechk()\n            }\n        else{\n            //make unbookable for today\n            if(lpdate.toDateString()===(today).toDateString()){\n                for(y=2;y<=11;y++)//10 time values\n                    {data[y][i]=5;}\n                gdatechk[i]=1;\n                } \n        //post values\n        var month=lpdate.getMonth()+1\n        var getdate=lpdate.getDate()+'-'+month;\n        var dateyear=String(lpdate.getFullYear());\n        var doc=this.state.docselect;\n            axios.post(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/getdate`,{date:getdate,year:dateyear,doc:doc,mail:mail}).then(res => {   \n                if(res.data[\"message\"]!==\"Internal server error\"){\n                    for(var x in res.data) {\n                        var slot=res.data[x];\n                        //if day value is h- holiday lock all timings on that thing\n                        if(slot[\"day\"]===\"h\"){\n                            for(var y=2;y<=11;y++)//10 time values\n                                {data[y][i]=5;}\n                                gdatechk[i]=1;\n                        }else{//if not holiday or spl day parse timing slots\n                            for(y in timings){\n                                if(String(timings[y]) in slot){\n                                    //[ a- available ]  [ b- booked ]   [ c- cancelled ] [ h- holiday/doc leave]\n                                    if(slot[timings[y]]==='a'){\n                                        data[parseInt(y)+2][i]=0;\n                                    }else if(slot[timings[y]]==='t'){//taken\n                                        data[parseInt(y)+2][i]=1;\n                                    }else if(slot[timings[y]]==='c'){//cancelled\n                                        data[parseInt(y)+2][i]=2;\n                                    }else if(slot[timings[y]]==='u'){//doc unavailable\n                                        data[parseInt(y)+2][i]=3;\n                                    }else if(slot[timings[y]]==='b'){//my booked\n                                        data[parseInt(y)+2][i]=4;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    gdatechk[i]=1;\n                    this.getdatechk()\n                }\n                })\n            }\n    }\n    getdatechk(){\n        var allchk=true;\n        for(var i=0;i<=6;i++){\n            if(gdatechk[i]!==1){\n                allchk=false;\n                break;\n            }\n        }\n        if(allchk===true){\n            this.setState({calen_load:false});\n            for(i=0;i<=6;i++){gdatechk[i]=0;}}\n    }\n    get_doc(e){\n        axios.get(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/getdoc`,{}).then(res => {\n          if(res.data[\"message\"]!==\"Internal server error\"){\n              doclist=res.data;\n              doc[0]=doclist[0]['n'];\n              this.get_desc(doclist[0]['id']);\n              this.setState({docselect:doclist[0]['id']});\n              this.setState({docname:doclist[0]['n']});\n              this.onChange(date);\n              this.setState({dclist_load:false});\n          }\n        })\n    }\n    selectcallback = (childData) => {\n        this.setState({desc_load:true});\n        this.setState({docselect:doclist[parseInt(childData)]['id']},()=>{\n            this.onChange(date);\n            this.setState({calen_load:true});});\n        this.setState({docname:doclist[childData]})\n\n        this.setState({docname:doclist[parseInt(childData)]['n']});\n        doc[0]=doclist[parseInt(childData)]['n'];\n        this.get_desc(doclist[childData]['id']);\n    }\n    renderTable() {\n        return data.map((dat, index) => {\n            var td=\"ta\";\n            var ret;\n            if(index=== 0){td=\"t1\";//date row\n            ret=<tr key={index} className={td}>\n                    <td>{dat[0]}</td>\n                    <td>{dat[1]}</td>\n                    <td>{dat[2]}</td>\n                    <td>{dat[3]}</td>\n                    <td>{dat[4]}</td>\n                    <td>{dat[5]}</td>\n                    <td>{dat[6]}</td>\n                </tr>;\n            }\n            else if(index===1){td=\"t2\";//day row\n            ret=<tr key={index} className={td}>\n                    <td>{dat[0]}</td>\n                    <td>{dat[1]}</td>\n                    <td>{dat[2]}</td>\n                    <td>{dat[3]}</td>\n                    <td>{dat[4]}</td>\n                    <td>{dat[5]}</td>\n                    <td>{dat[6]}</td>\n                </tr>;\n            }\n            else if(index>1){//rest of time slot in table\n                var cln=[],txt=[],dis=[];// arrays of -  classname , display text , button disable flag\n                for(var i=0;i<=6;i++){\n                    switch(dat[i]){\n                        case 0:\n                            cln.push(\"appt-a\");//available\n                            txt.push(time[index-2]);\n                            dis.push(0);\n                            break;\n                        case 1:\n                            cln.push(\"appt-t\");\n                            txt.push(time[index-2]+\"\\n taken \");//already booked taken\n                            dis.push(1);\n                            break;\n                        case 2:\n                            cln.push(\"appt-c\");\n                            txt.push(time[index-2]+\"\\n appointment cancelled \");// ur booked appointment cancelled\n                            dis.push(1);\n                            break;\n                        case 3:\n                            cln.push(\"appt-u\");//doc unavailable\n                            txt.push(\"unavailable\");\n                            dis.push(1);\n                            break;\n                        case 4:\n                            cln.push(\"appt-b\");//booked\n                            txt.push(time[index-2]+\"\\n your appointment \");//your upcomming appointment\n                            dis.push(0);\n                            break;\n                        case 5:\n                            cln.push(\"appt-l\");//locked\n                            txt.push(time[index-2]+\"\\n --- \");//locked date as its not today or holiday\n                            dis.push(0);\n                            break;\n                        default:\n                            cln.push(\"appt-a\");\n                            txt.push(time[index-2]);\n                            dis.push(1);\n                    }\n                }\n                ret=<tr key={index} className={td}>\n                        <td><button disabled={dis[0]} className={styles[cln[0]]} onClick={this.bookapt} value={[index-2,0]}>{txt[0]}</button></td>\n                        <td><button disabled={dis[1]} className={styles[cln[1]]} onClick={this.bookapt} value={[index-2,1]}>{txt[1]}</button></td>\n                        <td><button disabled={dis[2]} className={styles[cln[2]]} onClick={this.bookapt} value={[index-2,2]}>{txt[2]}</button></td>\n                        <td><button disabled={dis[3]} className={styles[cln[3]]} onClick={this.bookapt} value={[index-2,3]}>{txt[3]}</button></td>\n                        <td><button disabled={dis[4]} className={styles[cln[4]]} onClick={this.bookapt} value={[index-2,4]}>{txt[4]}</button></td>\n                        <td><button disabled={dis[5]} className={styles[cln[5]]} onClick={this.bookapt} value={[index-2,5]}>{txt[5]}</button></td>\n                        <td><button disabled={dis[6]} className={styles[cln[6]]} onClick={this.bookapt} value={[index-2,6]}>{txt[6]}</button></td>\n                    </tr>;\n                   \n            }\n           return ret\n        })\n     }\n     //book or check booked appointment\n     bookapt(e){//params =  [0 -time slot index value ,  2 -day index (sratr week day is 0) ]\n        if(this.state.calen_load===false){\n            var bkval=e.currentTarget.value;\n            var bookdate=new Date(this.state.curdate);\n            bookdate.setDate(bookdate.getDate()-(3));\n            bookdate.setDate(bookdate.getDate()+parseInt(bkval[2]));\n            switch(data[parseInt(bkval[0])+2][parseInt(bkval[2])]){\n                case 0:\n                    //new booking function\n                    this.props.history.push({pathname:'/form',\n                    state: {bookdate:bookdate,\n                        booktime:bkval[0],\n                        doc:this.state.docselect,\n                        docname:this.state.docname}});\n                    break;\n                case 4:\n                    //already booked details \n                    this.props.history.push({pathname:'/appointment',\n                    state: {\n                        bookdate:bookdate.getDate()+\"-\"+(bookdate.getMonth()+1),\n                        booktime:time[bkval[0]],\n                        year:bookdate.getFullYear(),\n                        doc:this.state.docselect,\n                        docname:this.state.docname,\n                        timed:timings[bkval[0]],\n\n                    }});\n                    break;\n                default:\n                    break;\n            }\n        }\n     }\n     handleClickbook = () => {\n        if (!this.state.showModal) {\n          document.addEventListener(\"click\", this.handleOutsideClickbook, false);\n        } else {\n          document.removeEventListener(\"click\", this.handleOutsideClickbook, false);\n        }\n    \n        this.setState(prevState => ({\n          showModal: !prevState.showModal\n        }));\n      };\n    \n      handleOutsideClickbook = e => {\n        if (!this.nodebook.contains(e.target)) this.handleClickbook();\n      };\n//date picker clicked calendar dates change function\n    onChange = (dateco) => {\n        this.setState({calen_load:true});\n       //resetting table\n       for(var iks=0;iks<=11;iks++)\n       for(var jks=0;jks<=6;jks++)\n        data[iks][jks]=0;\n        //setting week firstday\n        var datec=new Date(dateco);\n       datec.setDate(datec.getDate()-3);\n       var lpdate=new Date(datec);\n       lpdate.setHours(0,0,0,0);\n        //vertical date fetching and parsing on data variable matrix\n       for(var i=0;i<=6;i++){\n           data[0][i]=lpdate.getDate()+'-'+(lpdate.getMonth()+1)+'-'+lpdate.getFullYear();//first row date\n           data[1][i]=day[lpdate.getDay()];//second row day\n           //get timings per day\n            this.get_date(lpdate,i);//rest of all vertical time per day getting and parsing on data matrix\n            //loop adding date\n           lpdate.setDate(lpdate.getDate()+1);\n        }\n        this.setState({showModal:false})\n      }\n      \n    render(){\n        return(\n        <div className={cx(bs.row,styles.appointment)}>\n            <div className={cx(styles.sidepan,bs['col-lg-3'])}>\n                <div>\n                    <Back/>\n                    {this.state.dclist_load?\n                        <span className={cx(bs['spinner-border'],bs['spin-white'])}></span>\n                        :<div className={styles.label}>\n                            select doctor:<Docsel className={cx(bs['container-fluid'])} parentCallback = {this.selectcallback} doc={doclist}/></div>\n                    }\n                </div>\n                <hr className={styles.solid}></hr>\n                <div className={bs.row}>\n                <img className={cx(bs.img,styles.dp)} src={\"https://d23yysxhlq0p5m.cloudfront.net/dp/\"+this.state.docselect+\".jpg\"}/>\n                    <div className={styles.doc}>{doc[0]}</div>\n                </div>{\n                this.state.desc_load? <span className=\"spinner-border spin-white\"></span>:\n                    <div className={styles.description}>{doc[1]}</div>\n                }\n                <div className={bs['container-fluid']}></div>\n                <button className={styles.logoutbtn} onClick={this.logout}>Logout</button>\n                <div className={styles.mailid}>{mail}</div>\n                \n                \n            </div>\n            <div className={cx(styles.main,bs['col-lg-9'])}>\n                <div className={styles.header}>\n                Appointment\n                </div>\n                <div className={bs.flexbox}>\n                    <div className={styles.datepiktxt}>{data[0][3]}</div>\n                    <button className={styles.datepikbtn} onClick={this.handleClickbook}>change date</button>\n                    <div ref={nodebook => {this.nodebook = nodebook;}}>\n                    {this.state.showModal && (\n                        <Calendar className={styles.modal_calendar} minDate={today} maxDate={maxdate} onChange={this.onChange} value={date} />\n                    )}\n                </div>\n                </div>\n                \n                <div className={styles.appointments}>\n                        <div className= {this.state.calen_load?styles.blur:null}>\n                        <table className={styles.table}>\n                            <tbody>\n                                {this.renderTable()}\n                            </tbody>\n                        </table>\n                        </div>\n                    </div>\n            </div>\n        </div>\n        )\n    }\n}\nexport default Appointment;","/root/webdev/medbooking/medbooking/src/pages/main.js",[],"/root/webdev/medbooking/medbooking/src/pages/patient_form.js",["55"],"import React from 'react';\nimport Calendar from 'react-calendar';\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\nimport styles from '../style/patform.module.scss';\nimport bs from '../style/bootstrap.min.module.css';\nimport cx from 'classnames';\nimport calen from '../style/react_calendar.module.scss';\nvar dob=new Date();//date of birth\nconst date=new Date();//current date\nvar timings=[\"9:00\",\"10:00\",\"11:00\",\"12:00\",\"13:00\",\"14:00\",\"15:00\",\"16:00\",\"17:00\",\"18:00\"];//server 24 hr format\nconst time=[\"09:00 am\",\"10:00 am\",\"11:00 am\",\"12:00 pm\",\"01:00 pm\",\"02:00 pm\",\"03:00 pm\",\"04:00 pm\",\"05:00 pm\",\"06:00 pm\"];//12 hr format for displaying\nclass Patient_Form extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            fname:\"\",\n            lname:\"\",\n            dob:\"dd-mm-yy\",\n            gen:'Female',\n            desc:\"\",\n            fnamefl:\"\",\n            lnamefl:\"\",\n            dobfl:\"\",\n            descfl:\"\",\n            showModal: false,\n            bookdate:this.props.location.state.bookdate,\n            booktime:this.props.location.state.booktime,\n            load:false\n        };\n        axiosRetry(axios, { retries: 2 });\n        this.check_login =this.check_login.bind(this);\n        this.check_login();\n        this.stopld=this.stopld.bind(this);\n        this.send_form= this.send_form.bind(this);\n        this.c_fname = this.c_fname.bind(this);\n        this.c_lname = this.c_lname.bind(this);\n        this.c_desc = this.c_desc.bind(this);\n        this.c_dob = this.c_dob.bind(this);\n        this.c_gen= this.c_gen.bind(this);\n        this.verify=this.verify.bind(this);\n      }\n      //login check\n      check_login(){\n        const loggedin = localStorage.getItem(\"user\");\n        if (loggedin==null) {\n            alert(\"please login first\");\n            this.props.history.push('/');\n        }\n      }\n    //value changing function\n    c_fname(e){this.setState({ fname: e.currentTarget.value});\n      this.setState({fnamefl:\"\"})}\n    c_lname(e){this.setState({ lname: e.currentTarget.value});\n      this.setState({lnamefl:\"\"})}\n    c_desc(e){this.setState({ desc: e.currentTarget.value});\n      this.setState({descfl:\"\"})}\n    c_dob(e){\n      var dtxt=e.getDate()+'-'+(e.getMonth()+1)+'-'+e.getFullYear();\n      dob=e;\n      this.setState({dob:dtxt});\n      this.setState({dobfl:\"\"});\n      this.setState({showModal:false});\n    }\n    c_gen(e){this.setState({gen:e.currentTarget.value});}\n    //calander show on click\n    handleClick = () => {\n      if (!this.state.showModal) {\n        document.addEventListener(\"click\", this.handleOutsideClick, false);\n      } else {\n        document.removeEventListener(\"click\", this.handleOutsideClick, false);\n      }\n  \n      this.setState(prevState => ({\n        showModal: !prevState.showModal\n      }));\n    };\n    //from verification\n    verify(){\n        var valid=true;\n        if(this.state.fname===\"\"){valid=false;\n          this.setState({fnamefl:\"please enter first name\"})}\n        if(this.state.lname===\"\"){valid=false;\n          this.setState({lnamefl:\"please enter last name\"})}\n        if(this.state.desc===\"\"){valid=false;\n          this.setState({descfl:\"description required\"})}\n        if(this.state.dob===\"dd-mm-yy\"){valid=false;\n          this.setState({dobfl:\"please select date of birth\"})}\n        if(valid===true){this.send_form()}\n    }\n\n    //send form\n    send_form(){\n      this.setState({load:true});\n      const loggedin = localStorage.getItem(\"user\");\n      const info = {\n        btime:timings[this.props.location.state.booktime],\n        day:this.state.bookdate.getDate(),\n        month:this.state.bookdate.getMonth()+1,\n        year:this.state.bookdate.getFullYear(),\n        doc:this.props.location.state.doc,\n        first_name:this.state.fname,\n        last_name:this.state.lname,\n        dob:this.state.dob,\n        gen:this.state.gen,\n        desc:this.state.desc,\n        umail: JSON.parse(loggedin)[\"mail\"],\n        upass: JSON.parse(loggedin)[\"pass\"],\n      };\n        axios.post(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/book`,info).then(res => {\n           if(res.data[\"message\"]!==\"Internal server error\"){\n                    if(res.data===\"booked\"){\n                      alert(\"appointment booked\");\n                      this.props.history.push(\"/book\");\n                    }\n                  }\n              else{\n                alert(\"something went wrong retry please\");\n              }\n        }).catch(error => {\n          this.stopld();\n        });\n    }\n    //stop loading and alert\n    stopld(){\n      alert(\"please try again\");\n      this.setState({load:false});\n  }\n    render(){\n        return(\n        <div>\n            <div className={cx(bs.header,bs.row)}>\n              Patient form\n            </div>\n            <div className=\"bookfor\">{\"booking for \"+this.state.bookdate.getDate()+'-'+(this.state.bookdate.getMonth()+1)+'-'+this.state.bookdate.getFullYear()\n              +\"   (\"+time[parseInt(this.state.booktime)]+\") for doctor \"+this.props.location.state.docname}</div>\n            <div className={styles.form}>\n                <input value={this.state.fname} onChange={this.c_fname} className={styles.fname} placeholder=\"first name\" />\n                <div className={styles.invalidtxt}>{this.state.fnamefl}</div>\n                <input value={this.state.lname} onChange={this.c_lname} className={styles.lname} placeholder=\"last name\" />\n                <div className={styles.invalidtxt}>{this.state.lnamefl}</div>\n                  <div className={styles.row}>\n                    <div className={styles.datepiktxt}>{this.state.dob}</div>\n                    <button className={styles.datepikbtn} onClick={this.handleClick}>change D.O.B</button>\n                    <div ref={node => {this.node = node;}}>\n                      {this.state.showModal && (\n                          <Calendar\n                            className={styles.cal}\n                            value={dob}\n                            maxDate={date}\n                            onChange={this.c_dob}/>\n                      )}</div>\n                      \n                      <div className={styles.hint}>(hint : click calendar title twice to change year)</div>\n                </div>\n                <div className={styles.invalidtxt}>{this.state.dobfl}</div>\n                <select className={styles.gen} value={this.state.gen} onChange={this.c_gen}>\n                    <option value=\"female\">female</option>\n                    <option value=\"male\">male</option>\n                    <option value=\"other\">other</option>\n                </select>\n                <input value={this.state.desc} onChange={this.c_desc} className=\"desc\" placeholder=\"description\" />\n                <div className={styles.invalidtxt}>{this.state.descfl}</div>\n                {this.state.load?\n                <button className={cx(styles.submit,styles.patsub)} onClick={this.verify}>\n                  <span className={cx(bs[\"spinner-border\"],bs[\"spin-white\"])}></span></button>:\n                  <button className={cx(styles.submit,styles.patsub)} onClick={this.verify}>submit</button>\n                }\n            </div>\n        </div>)\n    }\n}\n\nexport default Patient_Form;","/root/webdev/medbooking/medbooking/src/pages/view_appointment.js",[],"/root/webdev/medbooking/medbooking/src/pages/adminlogin.js",[],"/root/webdev/medbooking/medbooking/src/pages/adminmain.js",["56"],"import React from 'react';\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\nimport Docsel from '../components/doc_select'\nimport Calendar from 'react-calendar';\nimport bs from '../style/bootstrap.min.module.css';\nimport cx from 'classnames';\nimport styles from '../style/adminmain.module.scss';\nconst timings=[\"9:00\",\"10:00\",\"11:00\",\"12:00\",\"13:00\",\"14:00\",\"15:00\",\"16:00\",\"17:00\",\"18:00\"];//server 24 hr format\nvar doclist=[];//doctor json list with name and id and possible mor in future\nvar doc=[\"loading . . .   \",\"\"];\nvar date=new Date();//current/selected date throughout this file\nvar maxdate=new Date(date);\nconst time=[\"09:00 am\",\"10:00 am\",\"11:00 am\",\"12:00 pm\",\"01:00 pm\",\"02:00 pm\",\"03:00 pm\",\"04:00 pm\",\"05:00 pm\",\"06:00 pm\"];//12 hr format for displaying\nconst day=[\"sun\",\"mon\",\"tue\",\"wed\",\"thu\",\"fri\",\"sat\"];\nvar data =  [\n    [\"01-02-2020\"],\n    [\"mon\"],\n    [0,0,0,0,0,0,0,0,0,0,0,0],[\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \"],\n    [\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \"],[\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \"],\n    [\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \"],[\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \"],[\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \",\" \"],\n];\nmaxdate.setDate(maxdate.getDate()+180);\nvar uname,pass;\nclass AdminMain extends React.Component{\n    constructor(props) {\n        super(props);\n\n        this.check_login =this.check_login.bind(this);\n        this.check_login();\n        if(uname===\"admin\")\n            this.get_doc();\n        else\n            this.get_date(date);\n        this.state = {\n            docselect:uname,\n            holiday:\"\",\n            modload:false,\n            calen_load:true,\n            dclist_load:true,//doc list loading flag\n            confirm_box:false\n        };\n        this.logout=this.logout.bind(this);\n        this.openappt=this.openappt.bind(this);\n        this.reset_table=this.reset_table.bind(this);\n        axiosRetry(axios, { retries: 3 });\n      }\n      //login check\n      check_login(){\n        const loggedin = localStorage.getItem(\"admin\");\n        if (loggedin==null) {\n            alert(\"please login first\");\n            this.props.history.push('/admin');\n        }else{\n            uname=JSON.parse(loggedin)[\"uname\"];\n            pass=JSON.parse(loggedin)[\"pass\"];}\n      }\n      get_doc(e){\n          this.reset_table();\n        axios.get(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/getdoc`,{}).then(res => {\n          if(res.data[\"message\"]!==\"Internal server error\"){\n              doclist=res.data;\n              doc[0]=doclist[0]['n'];\n              this.get_desc(doclist[0]['id']);\n              this.setState({docselect:doclist[0]['id']});\n              this.setState({docname:doclist[0]['n']});\n              this.onChange(date);\n              this.setState({dclist_load:false});\n          }\n        })\n    }\n      get_date(lpdate){\n        //post values\n        var month=lpdate.getMonth()+1\n        var getdate=lpdate.getDate()+'-'+month;\n        var dateyear=String(lpdate.getFullYear());\n        var doc=uname;\n        this.setState({holiday:\"\"});\n        if(uname===\"admin\")\n            doc=this.state.docselect;\n        var send={date:getdate,year:dateyear,doc:doc};\n        axios.post(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/admin/view`,send).then(res => {   \n            if(res.data[\"message\"]!==\"Internal server error\"){\n                console.log(\"admin gdateresponse: \"+JSON.stringify(res.data));\n                    //if day value is h- holiday lock all timings on that thing\n                    if(JSON.stringify(res.data[\"day\"])==='{\"S\":\"h\"}'){\n                        console.log(\"admin gdateresponse: \"+JSON.stringify(res.data[\"day\"]));\n                        this.setState({holiday:\" (holiday)\"});\n                        for(var y=0;y<=9;y++)//10 time values\n                            {data[2][y]=5;}\n                    }else{//if not holiday or spl day parse timing slots\n                        for(y in timings){\n                            if(String(timings[y]) in res.data){\n                                console.log(String(timings[y])+\" oclock is \"+ JSON.stringify(res.data[timings[y]]));\n                                console.log(\"y value\"+y);   \n                                //[ a- available ] [t- taken] [ c- cancelled ] [ h- holiday/doc leave]\n                                if(res.data[timings[y]]['S']==='a'){\n                                    data[2][parseInt(y)]=0;\n                                }else if(res.data[timings[y]]['S']==='t'){//taken(appointment fixed)\n                                    data[2][parseInt(y)]=1;\n                                    this.get_details(lpdate,y);\n                                }else if(res.data[timings[y]]['S']==='u'){//doc unavailable\n                                    data[2][parseInt(y)]=3;\n                                }\n                            }\n                        }\n                    }\n                \n        this.setState({calen_load:false});\n            }\n            })\n    }\n    onChange = (datec) => {\n        this.reset_table();\n        date=datec;\n        console.log(\"date picker : \"+datec);\n        this.setState({calen_load:true});\n       //resetting table\n       for(var jks=0;jks<=12;jks++)\n            data[2][jks]=0;\n        //setting date and day\n        data[0][0]=datec.getDate()+'-'+(datec.getMonth()+1)+'-'+datec.getFullYear();//first row date\n        console.log(\"datec gdate: \"+datec);\n        data[1][0]=day[datec.getDay()];//second row day\n        //get timings per day\n        this.get_date(datec);//rest of all vertical time per day getting and parsing on data matrix\n        this.setState({showModal:false})\n      }\n    logout(){\n        this.setState({admin:{}});\n        localStorage.clear();\n        this.props.history.push('/admin');\n      }\n    get_details(e,i){\n        console.log(e);\n        var month=e.getMonth()+1\n        var getdate=e.getDate()+'-'+month;\n        var year=String(e.getFullYear());\n        var det={\n        date:getdate,\n        time:timings[i],\n        year:year,\n        pass:pass,\n        uname:uname,\n        doc:this.state.docselect}\n        console.log(det);\n        axios.post(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/admin/details`,det).then(res => { \n            if(res.data!==\"error\"&&res.data!==\"no app\"){\n            console.log(res.data);\n            data[4][i]=res.data[\"first name\"].S+\" \"+res.data[\"last name\"].S;\n            data[5][i]=res.data.gen.S;\n            data[6][i]=res.data.dob.S;\n            data[7][i]=res.data.desc.S;\n            data[8][i]=res.data.mail.S;\n            this.setState({desc_load:false});\n            }\n    })\n    }\n    get_desc(e){\n        axios.post(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/getdoc`,{id:e}).then(res => { \n            if(res.data[\"message\"]!==\"Internal server error\"){\n            doc[1]=res.data;\n            this.setState({desc_load:false});\n            }\n    })}\n    selectcallback = (childData) => {\n        this.setState({desc_load:true});\n        this.setState({docselect:doclist[parseInt(childData)]['id']},()=>{\n        this.onChange(date);\n        this.setState({calen_load:true});});\n        this.setState({docname:doclist[childData]})\n        this.setState({docname:doclist[parseInt(childData)]['n']});\n        doc[0]=doclist[parseInt(childData)]['n'];\n        this.get_desc(doclist[childData]['id']);\n    }\n    renderTable() {\n        return data[2].map((dat,index)=>{\n            var cln,txt,con;// arrays of -  classname , display text , button disable flag\n                switch(dat){\n                    case 0:\n                        cln=\"appt-a\";//available\n                        con=\"mark doctor unavailable ?\";\n                        txt=time[index];\n                        break;\n                    case 1:\n                        cln=\"appt-b\";\n                        con=\"cancel appointment ?\";\n                        txt=time[index]+\"\\n fixed \";//already booked taken\n                        break;\n                    case 3:\n                        cln=\"appt-u\";//doc unavailable\n                        con=\"mark doctor available ?\";\n                        txt=\"unavailable\";\n                        break;\n                    case 5:\n                        cln=\"appt-l\";//locked\n                        txt=time[index]+\"\\n --- \";//locked date as its not today or holiday\n                        break;\n                    default:\n                        cln=\"appt-a\";\n                        txt=time[index-2];\n                }\n               return(<tbody>\n                    <tr key={index} className={\"row\"+index}>\n                        {uname===\"admin\"?\n                        <td><button className={cln} disabled={dat===5?1:0} onClick={() => { if(uname===\"admin\"){if (window.confirm(con)){console.log(\"adminmod-\"+dat);this.openappt(index)}} }} value={[index]}>{txt}</button></td>:\n                        <td><button className={cln}  value={[index]}>{txt}</button></td>\n                    }\n                        <td className=\"textblk\">{data[4][index]}</td>\n                        <td className=\"textblk\">{data[5][index]}</td>\n                        <td className=\"textblk\">{data[6][index]}</td>\n                        <td className=\"textblk\">{data[7][index]}</td>\n                        <td className=\"textblk\">{data[8][index]}</td>\n                    </tr>\n                    </tbody>)\n           })\n        \n    }\n    reset_table(){\n        for(var i=0;i<=11;i++)\n            data[2][i]=0;\n        for(i=3;i<=8;i++)\n        for(var j=0;j<=10;j++){\n            data[i][j]=\" \";\n        }\n    }\n\n    openappt(bkval){\n        console.log(bkval);\n        if(this.state.calen_load===false){\n            //params setting\n            var month=date.getMonth()+1;\n            var getdate=date.getDate()+'-'+month;\n            var params={\n                doc:this.state.docselect,\n                uname:uname,\n                upass:pass,\n                mod:\"\",\n                time:\"\",\n                year:String(date.getFullYear()),\n                date:getdate\n            }\n            if(bkval===\"hol\"){\n                console.log(\"holiday curdate: \"+ date);\n                if(this.state.holiday===\"\")\n                    params[\"mod\"]=\"hol\";\n                else\n                    params[\"mod\"]=\"wor\";\n                this.adminmod(params)\n            }\n            else{\n                switch(data[2][bkval]){\n                    case 0:\n                        params[\"mod\"]=\"ua\";\n                        params[\"time\"]=timings[bkval]\n                        this.adminmod(params)\n                        break;\n                    case 1:\n                        params[\"mod\"]=\"can\";\n                        params[\"time\"]=timings[bkval]\n                        this.adminmod(params)\n                        break;\n                    case 3:\n                        params[\"mod\"]=\"a\";\n                        params[\"time\"]=timings[bkval]\n                        this.adminmod(params)\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n    }\n    adminmod(params){\n        this.setState({calen_load:true});\n        console.log(params);\n        axios.post(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/admin/mod`,params).then(res => {\n            //console.log(res.data);\n          if(res.data===\"success\"){\n            this.onChange(date);\n          }\n        }).catch(error => {\n            this.setState({calen_load:false});\n            alert(\"please try again\");\n          });\n    }\n    handleClickbook = () => {\n        if (!this.state.showModal) {\n          document.addEventListener(\"click\", this.handleOutsideClickbook, false);\n        } else {\n          document.removeEventListener(\"click\", this.handleOutsideClickbook, false);\n        }\n    \n        this.setState(prevState => ({\n          showModal: !prevState.showModal\n        }));\n      };\n    \n      handleOutsideClickbook = e => {\n        if (!this.nodebook.contains(e.target)) this.handleClickbook();\n      };\n    render(){\n        return(\n        <div>\n            <div className={cx(styles.row,styles.main)}>\n            <img className={cx(styles.img,styles.dp)} src={\"https://d23yysxhlq0p5m.cloudfront.net/dp/\"+this.state.docselect+\".jpg\"}/>\n            {\n                uname===\"admin\"?this.state.dclist_load?\n                    <span className={cx(bs['spinner-border'],bs['spin-white'])}></span>\n                    :<Docsel className={bs['container-fluid']} parentCallback = {this.selectcallback} doc={doclist}/>\n                :<div className={styles.uname}>{uname}</div>\n            }\n            </div>\n            <div className={bs.flexbox}>\n            <button onClick={\n                this.props.history.push('/admin/doc')}>doctor management</button>\n            <button className={cx(styles['logout-btn'],bs.flexbox)} onClick={this.logout}>Logout</button>\n                    <div className={styles.datepiktxt}>{data[0][0]}</div>\n                    <button className={styles.datepikbtn} onClick={this.handleClickbook}>change date</button>\n                    <div ref={nodebook => {this.nodebook = nodebook;}}>\n                        {this.state.showModal && (\n                            <Calendar className={styles['modal-calendar']} maxDate={maxdate} onChange={this.onChange} value={date} />\n                        )}\n                    </div>\n            </div>\n                <div className= {this.state.calen_load?\"blur\":null} >\n                    <button className=\"t2\" onClick={() => { if (window.confirm(\"toggle holiday\"))this.openappt(\"hol\") }}>\n                        {day[date.getDay()]+this.state.holiday} </button>\n                        <table className={cx(styles.table,styles.chart)}>\n                                {this.renderTable()}\n                        </table>\n                </div>\n        </div>)\n    }\n}\n\nexport default AdminMain;","/root/webdev/medbooking/medbooking/src/components/history.js",[],"/root/webdev/medbooking/medbooking/src/components/back_btn.js",["57"],"/root/webdev/medbooking/medbooking/src/components/doc_select.js",[],"/root/webdev/medbooking/medbooking/src/pages/docedit.js",["58","59","60"],"import React from 'react';\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\nimport styles from '../style/doc_edit.module.scss';\nimport bs from '../style/bootstrap.min.module.css';\nimport cx from 'classnames';\nvar uname,pass;\nvar doclist=[{id:\"\",n:\"\"}];//doctor json list with name and id and possible mor in future\nclass Doc_edit extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            id:\"\",\n            uname:\"\",\n            pass:\"\",\n            changed:false,\n            editbox:false,\n            load:true\n        };\n        this.check_login=this.check_login.bind(this);\n        this.get_doc=this.get_doc.bind(this);\n        this.listview=this.listview.bind(this);\n        this.edit_men=this.edit_men.bind(this);\n        this.c_uname=this.c_uname.bind(this);\n        this.c_pass=this.c_pass.bind(this); \n        this.get_doc();\n        axiosRetry(axios, { retries: 2 });\n      }\n      c_uname(e){this.setState({uname: e.currentTarget.value});this.setState({changed:true});}\n      c_pass(e){this.setState({pass: e.currentTarget.value});this.setState({changed:true});}\n      //login check\n      check_login(){\n        const loggedin = localStorage.getItem(\"admin\");\n        if (loggedin==null) {\n            alert(\"please login first\");\n            this.props.history.push('/admin');\n        }else{\n            uname=JSON.parse(loggedin)[\"uname\"];\n            pass=JSON.parse(loggedin)[\"pass\"];}\n      }\n      edit_men(id){\n        this.setState({changed:false});\n        this.setState({pass:\"\"});\n        this.setState({id:doclist[id.target.value]['id']})\n        this.setState({uname:doclist[id.target.value]['n']})\n        this.setState({showModal:true})\n      }\n      get_doc(e){\n          this.setState({load:true})\n        axios.get(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/getdoc`,{}).then(res => {\n            //console.log(res.data);\n          if(res.data[\"message\"]!==\"Internal server error\"){\n              doclist=res.data;\n              this.setState({docselect:doclist[0]['id']});\n              this.setState({docname:doclist[0]['n']});\n              this.setState({dclist_load:false});\n          }\n        })\n    }\n    deldoc(e){\n      console.log(\"delete doc \"+e.currentTarget.value);\n      axios.get(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/deldoc`,{}).then(res => {\n          if(res.data[\"message\"]!==\"Internal server error\"){\n              doclist=res.data;\n              this.setState({docselect:doclist[0]['id']});\n              this.setState({docname:doclist[0]['n']});\n              this.setState({dclist_load:false});\n          }\n        })\n    }\n    sendchanges(e){\n      var id=e.target.value;\n      axios.post(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/editdoc`,{id:id}).then(res => { \n            if(res.data[\"message\"]!==\"Internal server error\"){\n            alert(\"changes saved\");\n            this.setState({desc_load:false});\n            }\n    })\n    }\n    //rendering list of doctors for editing\n    listview(){\n        return doclist.map((dat, index) => {\n            return <tr className=\"row\"><button className=\"edit\" onClick={this.edit_men} value={index}>{dat['n']}</button></tr>\n        })\n    }get_desc(e){\n        axios.post(`https://bqhdj6kx2j.execute-api.ap-south-1.amazonaws.com/test/getdoc`,{id:e}).then(res => { \n            if(res.data[\"message\"]!==\"Internal server error\"){\n              \n            }\n    })\n    }\n    handleClickbook = () => {\n        if (!this.state.showModal) {\n          document.addEventListener(\"click\", this.handleOutsideClickbook, false);\n        } else {\n          document.removeEventListener(\"click\", this.handleOutsideClickbook, false);\n        }\n    \n        this.setState(prevState => ({\n          showModal: !prevState.showModal\n        }));\n      };\n    \n      handleOutsideClickbook = e => {\n        if (!this.nodebook.contains(e.target)) this.handleClickbook();\n      };\n    render(){\n        return(\n        <div>\n            <div className={cx(bs.header,bs.row)}>\n              doctor management\n            </div>\n            <div ref={nodebook => {this.nodebook = nodebook;}}>\n            {this.state.showModal && (\n              <div>\n              <div>{this.state.id}</div>\n              <img onClick={console.log(\"dp edit\")} className={cx(bs.img,styles.dp)} src={\"https://d23yysxhlq0p5m.cloudfront.net/dp/\"+this.state.id+\".jpg\"}/>\n              <input value={this.state.uname} onChange={this.c_uname} className={styles.inputbox} placeholder=\"User Name\" />\n              <input value={this.state.pass} onChange={this.c_pass} className={styles.inputbox} placeholder=\"pass\" />\n              <button onClick={this.deldoc} value={this.state.id}>delete</button>\n              <button disabled={!this.state.changed} onClick={this.sendchanges} value={this.state.id}>save changes</button>\n              </div>\n            )}\n            </div>\n            <table className={styles.doclst}>\n            {this.listview()}\n            </table>\n        </div>)\n    }\n}\n\nexport default Doc_edit;",{"ruleId":"61","replacedBy":"62"},{"ruleId":"63","replacedBy":"64"},{"ruleId":"65","severity":1,"message":"66","line":6,"column":8,"nodeType":"67","messageId":"68","endLine":6,"endColumn":13},{"ruleId":"69","severity":1,"message":"70","line":346,"column":17,"nodeType":"71","endLine":346,"endColumn":134},{"ruleId":"65","severity":1,"message":"66","line":8,"column":8,"nodeType":"67","messageId":"68","endLine":8,"endColumn":13},{"ruleId":"69","severity":1,"message":"70","line":306,"column":13,"nodeType":"71","endLine":306,"endColumn":134},{"ruleId":"65","severity":1,"message":"72","line":3,"column":8,"nodeType":"67","messageId":"68","endLine":3,"endColumn":14},{"ruleId":"65","severity":1,"message":"73","line":38,"column":13,"nodeType":"67","messageId":"68","endLine":38,"endColumn":18},{"ruleId":"65","severity":1,"message":"74","line":39,"column":13,"nodeType":"67","messageId":"68","endLine":39,"endColumn":17},{"ruleId":"69","severity":1,"message":"70","line":117,"column":15,"nodeType":"71","endLine":117,"endColumn":158},"no-native-reassign",["75"],"no-negated-in-lhs",["76"],"no-unused-vars","'calen' is defined but never used.","Identifier","unusedVar","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'styles' is defined but never used.","'uname' is assigned a value but never used.","'pass' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]